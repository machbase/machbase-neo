---
parent: Tutorials
nav_order: 30
title: Timer
permalink: /docs/tutorials/timer
layout: default
---

# Timer
{: .no_toc}

A timer defines a task that should be executed at a given time or repeatedly at a given interval.

1. TOC
{: toc}

Let's make the "Hello World" of the timer.

```sql
CREATE TABLE TIMER(V1 VARCHAR(20), V2 VARCHAR(20));
```

## Make a *tql* script of "Hello World"

Open *tql* editor, copy the code below and save it as `helloworld.tql`.

```js
SCRIPT({
    fmt := import("fmt")
    ctx := import("context")
    ctx.yieldKey("message", "Hello World?")
})
APPEND(table("timer"))
```

TQL을 실행하면 `TIMER` 테이블에 `message`/`Hello World?` 내용이 담긴 데이터가 입력된다.

## Register task

Open machbase-neo shell and register a new timer to run the script in every 5 seconds.

```
timer add helloworld "@every 5s" helloworld.tql; 
```

Run `timer list` to verify your registration.

```
machbase-neo» timer list;
╭────────────┬────────────┬────────────────┬───────────┬───────╮
│ NAME       │ SPEC       │ TQL            │ AUTOSTART │ STATE │
├────────────┼────────────┼────────────────┼───────────┼───────┤
│ HELLOWORLD │ @every 5s  │ helloworld.tql │ false     │ STOP  │
╰────────────┴────────────┴────────────────┴───────────┴───────╯
```

Since we did not set `--autostart` option, the state of the task is `STOP`.

Make it start to run.

```
timer start helloworld;
```

```
machbase-neo» timer list;
╭────────────┬────────────┬────────────────┬───────────┬─────────╮
│ NAME       │ SPEC       │ TQL            │ AUTOSTART │ STATE   │
├────────────┼────────────┼────────────────┼───────────┼─────────┤
│ HELLOWORLD │ @every 5s  │ helloworld.tql │ false     │ RUNNING │
╰────────────┴────────────┴────────────────┴───────────┴─────────╯
```

결과를 보면 `timer` 테이블에 5초에 한번씩 데이터가 입력되는 것을 볼 수 있다.

```
machbase-neo» select count(*) from timer;
┌────────┬──────────┐
│ ROWNUM │ COUNT(*) │
├────────┼──────────┤
│      1 │ 1        │
└────────┴──────────┘
a row fetched.
```

after 5s...

```
machbase-neo» select count(*) from timer;
┌────────┬──────────┐
│ ROWNUM │ COUNT(*) │
├────────┼──────────┤
│      1 │ 2        │
└────────┴──────────┘
a row fetched.
```


Stop the task

```
timer stop helloworld;
```